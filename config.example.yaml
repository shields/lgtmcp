# Copyright Â© 2025 Michael Shields
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

# LGTMCP Configuration File
# Copy this file to one of the following locations:
# - $XDG_CONFIG_HOME/lgtmcp/config.yaml
# - ~/.config/lgtmcp/config.yaml

# Google Gemini API configuration
google:
  # Authentication options (choose one):

  # Option 1: API key authentication
  # Get your API key from: https://ai.google.dev/gemini-api/docs/api-key
  api_key: "your-gemini-api-key-here"

  # Option 2: Application Default Credentials (ADC)
  # Set to true to use ADC instead of API key
  # Requires one of:
  #   - GOOGLE_APPLICATION_CREDENTIALS environment variable pointing to service account JSON
  #   - gcloud auth application-default login (for local development)
  #   - Running on GCP with attached service account (for production)
  # Learn more: https://cloud.google.com/docs/authentication/application-default-credentials
  # use_adc: true

# Model configuration
gemini:
  # Model to use for code review
  # Default: gemini-2.5-pro
  model: "gemini-2.5-pro"

  # Temperature for response generation (0.0-1.0)
  # Lower values (0.0-0.3) are more deterministic and focused
  # Higher values (0.7-1.0) are more creative and varied
  # Default: 0.2 (recommended for highly consistent code reviews)
  temperature: 0.2

  # Retry configuration for handling rate limits and transient errors
  retry:
    # Maximum number of retry attempts (not including the initial attempt)
    # Default: 5
    max_retries: 5

    # Initial backoff duration before first retry
    # Format: Go duration string (e.g., "1s", "500ms", "2m")
    # Default: 1s
    initial_backoff: "1s"

    # Maximum backoff duration between retries
    # Format: Go duration string (e.g., "60s", "5m")
    # Default: 60s
    max_backoff: "60s"

    # Backoff multiplier for exponential backoff
    # Each retry waits: initial_backoff * (multiplier ^ attempt)
    # Default: 1.4
    backoff_multiplier: 1.4

# Git configuration
git:
  # Number of context lines to include in git diff output
  # Higher values provide more context for code review but increase token usage
  # Default: 20 (if not specified)
  # Set to 0 for minimal context (only changed lines)
  diff_context_lines: 20

# Security configuration
gitleaks:
  # Custom gitleaks configuration file (optional)
  # Note: Custom configs are not currently supported in the embedded library
  config: ""

# Logging configuration
logging:
  # Log level: debug, info, warn, error (default: info)
  level: "info"

  # Output destination (default: directory)
  # Options:
  #   - "none": Disable logging
  #   - "stdout": Log to standard output
  #   - "stderr": Log to standard error
  #   - "directory": Log to files in directory (default if empty/missing)
  #   - "mcp": Send logs to MCP client (future feature)
  output: "directory"

  # Directory for log files (optional when output is "directory")
  # Default locations:
  #   - macOS: ~/Library/Logs/lgtmcp/
  #   - Linux: ~/.local/share/lgtmcp/logs/
  #   - Windows: %LOCALAPPDATA%\lgtmcp\logs\
  # directory: "/custom/log/path"

# Prompts configuration (optional)
# Customize the prompts used for code review
prompts:
  # Path to custom review prompt file (optional)
  # The file should be a Markdown template with Go template syntax
  # Available template variables:
  #   - {{.AnalysisSection}} - Previous analysis from context gathering
  #   - {{.FilesList}} - List of changed files
  #   - {{.Diff}} - Git diff content
  # If not specified, uses the embedded default prompt
  # review_prompt_path: "/path/to/custom/review_prompt.md"

  # Path to custom context gathering prompt file (optional)
  # The file should be a Markdown template with Go template syntax
  # Available template variables:
  #   - {{.FilesList}} - List of changed files
  #   - {{.Diff}} - Git diff content
  # If not specified, uses the embedded default prompt
  # context_gathering_prompt_path: "/path/to/custom/context_prompt.md"
